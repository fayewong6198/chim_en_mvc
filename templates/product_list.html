{% extends 'base.html' %} {% block content %}

<div class="bg-light py-3">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb ct-breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Shop</li>
      </ol>
    </nav>
  </div>


  <div class="site-section">
    <div class="container">
      <div class="row mb-5">
        {% for product in products %}

        <div class="ct-product-card ct-primary-color col-md-3 col-sm-6 col-xs-12" data-aos="fade-up">
          <!-- Card Image -->
          <figure class="block-4-image">
            <a href="{% url 'cart:product-detail' product.slug %}">
              <div class="ct-container">
                <img src="{{product.images.first}}" alt="" />
                <div class="sale-block">
                  <span>Sale!</span>
                </div>
              </div>
            </a>
          </figure>
          <!-- Card content -->
          <div class="block-4-text p-2 mb-1">
            <a href="{% url 'cart:product-detail' product.slug %}">
              <h5>{{product.title}}</h5>
            </a>
            <h5 class="mb-0 bold-text">{{product.price}}</h5>
          </div>
          <!-- Card Actions -->
          <div class="block-4-action p-2">
            <div class="ct-container">
              <div class="row justify-content-center">
                <div class="col">
                  <a data-toggle="tooltip" data-placement="top" title="Add to cart" class="bold-text"
                    href="{% url 'cart:product-detail' product.slug %} "><i class="fa fa-cart-plus"></i></a>
                </div>

                {% if product.id in liked %}

                <div class="col">
                  <a data-toggle="tooltip" data-placement="top" title="Add to favorite" class="bold-text"
                    href="{% url 'cart:tym' product.id %}"><i class="fa fa-heart"></i></a>
                </div>

                {%else%}
                <div class="col">
                  <a data-toggle="tooltip" data-placement="top" title="Add to favorite" class="bold-text"
                    href="{% url 'cart:tym' product.id %}"><i class="fa fa-heart-o"></i></a>
                </div>
                {% endif %}

                <div class="col">

                  <a data-toggle="modal" data-target="#product{{product.id}}"><i data-toggle="tooltip" placement="top"
                      title="Quick view" class="fa fa-search-plus bold-text"></i></a>
                </div>
                <div class="col">
                  <a data-toggle="tooltip" data-placement="top" title="Compare" class="bold-text"
                    href="{% url 'login'%}"><i class="fa fa-columns"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!------------------ modal quick view --------------->
        <div class="modal fade bd-view-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
          id="product{{product.id}}" aria-hidden="true">
          <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
              <div class="row">
                <div class="col-12 col-md-6 col-sm-12">
                  <div id="view_carousel" class="carousel view-detail slide" data-ride="carousel">
                    <ol class="carousel-indicators view-indicators">
                      <li data-target="#view_carousel" data-slide-to="0" class="active"></li>
                      <li data-target="#view_carousel" data-slide-to="1"></li>
                      <li data-target="#view_carousel" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner view_carousel">
                      {% for image in product.images.all %}
                      <div class="carousel-item active">
                        <img src="{{image}}" alt="First slide">
                      </div>
                      {% endfor %}
                      <button type="button" class="close1 pr-2 pt-1" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <a class="carousel-control-prev" href="#view_carousel" role="button" data-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#view_carousel" role="button" data-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
                </div>
                <div class="col-12 col-md-6 col-sm-12 right-detail-view">
                  <button type="button" class="close pr-2 pt-1" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <div class="detail-info pt-4 pr-4">
                    <h3 class="title">{{product.title}}</h3>
                    <div class="rating">
                      <div class="stars">
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        <i class="far fa-star"></i>
                        <span class="review-no ml-2">(4 customer reviews)</span>
                      </div>
                    </div>

                    <div class="mb-3 mt-3">
                      <div class="product-info">

                        <div style="text-align: left !important"><span class="price">%15.00</span>
                          <span class="discounted-price">${{product.price}}</span></div>
                      </div>
                    </div>
                    <dl class="item-property pb-2">

                      <dd>
                        <p>{{product.description}}</p>
                      </dd>
                      <div class="line pb-3"></div>

                    </dl>

                    <div class="input-group mb-2">
                      <div class="input-group-prepend">
                        <button class="btn btn-dark btn-sm" id="minus-btn"><i class="fa fa-minus"></i></button>
                      </div>

                      <input class="text-center" style="height: 30px !important;" type="number" id="qty_input" value="1"
                        min="1">
                      <div class="input-group-prepend">
                        <button class="btn btn-dark btn-sm" id="plus-btn"><i class="fa fa-plus"></i></button>
                      </div>
                      <button type="button" class="btn btn-primary  ml-3">Add to cart</button>

                    </div>
                    <div class="compare">
                      <i class="far fa-star pr-2"></i><span>Add to Wishlist</span>
                      <i class="fas fa-compress-alt pr-2"></i><span>Compare</span>
                    </div>
                    <div class="line pb-3"></div>
                    <div class="view-bottom">
                      <div class="row">
                        <div class="col-5">
                          <p>Category</p>
                          <p>Tag</p>
                          <p>Share</p>
                        </div>
                        <div class="col-7">
                          <p>{{product.category}}</p>
                          <p>Bread ,asd</p>
                          <p>
                            <a href=""><span class="fa fa-star"></a></span>
                            <a href=""><span class="fa fa-star"></a></span>
                            <a href=""><span class="fa fa-star"></span>
                              <a href=""><span class="fa fa-star"></a>
                              </span></p>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- end modal quick view -->
        {% endfor %}
      </div>
    </div>
    <div class="navigation-page">
      <nav aria-label="...">
        {% if products.has_other_pages %}

        <ul class="pagination">
          {% if products.has_previous %}
          <li class="page-item">
            <a href="?page={{products.previous_page_number}}" class="page-link">&laquo</a>
          </li>
          {% else %}
          <li class="page-item">
            <a class="page-link disable">&laquo</a>
          </li>
          {% endif %}

          {% for i in products.paginator.page_range %}

          {% if products.number == i %}
          <li class="page-item active">
            <a href="?page={{i}}" class="page-link">{{i}}</a>
          </li>
          {% else %}
          <li class="page-item">
            <a href="?page={{i}}" class="page-link">{{i}}</a>
          </li>
          {% endif %}
          {% endfor %}
          {% if products.has_next %}
          <li class="page-item">
            <a href="?page={{products.next_page_number}}" class="page-link">&raquo</a>
          </li>
          {% else %}
          <li class="page-item">
            <a class="page-link disable">&raquo</a>
          </li>
          {% endif %}
        </ul>
        {% endif %}

      </nav>
    </div>
    {% endblock content %}
  </div>
</div>